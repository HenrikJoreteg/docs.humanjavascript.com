<!DOCTYPE html>
<html>
  <head>
    <link type="text/css" rel="stylesheet" href="/static/css/main.css">
    <link type="text/css" rel="stylesheet" href="/static/css/&amp;yet-highlight.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-44685415-1', 'humanjavascript.com');
      ga('send', 'pageview');
    </script>
    <title>Human JavaScript: ch11 - testing and QA that doesnt suck</title>
  </head>
  <body>
    <nav>
      <h3>Chapters</h3>
      <ul id="chapters"><a href="ch00-foreword.html" class="h2">ch00 - foreword</a><a href="ch01-introduction.html" class="h2">ch01 - introduction</a><a href="ch02-the-big-decision.html" class="h2">ch02 - the big decision</a><a href="ch03-code-for-humans.html" class="h2">ch03 - code for humans</a><a href="ch04-organizing-your-code.html" class="h2">ch04 - organizing your code</a><a href="ch05-eventification.html" class="h2">ch05 - eventification</a><a href="ch06-models.html" class="h2">ch06 - models</a><a href="ch07-views.html" class="h2">ch07 - views</a><a href="ch08-templating.html" class="h2">ch08 - templating</a><a href="ch09-clientside-routing.html" class="h2">ch09 - clientside routing</a><a href="ch10-launch-sequence.html" class="h2">ch10 - launch sequence</a><a href="ch11-testing-and-qa-that-doesnt-suck.html" class="h2">ch11 - testing and QA that doesnt suck</a><a href="ch12-settings-and-configs.html" class="h2">ch12 - settings and configs</a><a href="ch13-caveats.html" class="h2">ch13 - caveats</a><a href="ch14-conclusion.html" class="h2">ch14 - conclusion</a>
      </ul>
      <div id="slider"></div>
    </nav>
    <main>
      <h1 class="humanjs">HumanJS</h1><h1>Testing and QA that doesn&apos;t suck (so your app won&apos;t)</h1>
<h2>The problem/challenge of proper interface QA</h2>
<p>We all know we need to test. While in the building phase of a browser app I find that building an extensive test suite isn&apos;t necessarily worth the effort. Interfaces are inherently hard to test in that the variability of human input is part of what makes a good test for an interface. 

</p>
<p>Also, there are things that are just a bit hard to test. For example, if you support drag and drop actions in your interface it&apos;s not so easy to write a test that properly validates that it works.

</p>
<p>Then there&apos;s the &quot;problem&quot; of CSS changes. The DOM can be in perfect order but if the styles are off things can look quite broken.

</p>
<p>Some people build really elaborate QA systems that load their app into a headless browser and takes screenshots that are compared against reference images, etc. But the amount of effort and setup required for that is simply not practical in most cases.

</p>
<p>There are also tools like Selenium that will script a browser for you, but it&apos;s a whole lot of work and setup, and then every time you want to change something, if your tests are too specific they&apos;ll need to be constantly updated. And if they&apos;re too general they&apos;ll miss stuff.

</p>
<p>While headless browser testing is a really cool idea (PhantomJS, etc.), it doesn&apos;t really help you know how your app works in other browsers.

</p>
<p>Ultimately, I don&apos;t believe you can actually do proper testing of an interface without a human. 

</p>
<p>So, there must be a balance that can be struck between human approval and oversight and taking advantage of the things computers are good at like process, consistency, and automation.


</p>
<h2>Meet the SpaceMonkey</h2>
<p>So we&apos;ve been building one, we&apos;re calling it SpaceMonkey. There wasn&apos;t anything out there that did this in a way that was browser-agnostic, simple, and blended automation with human approval.

</p>
<p>We&apos;ve still got a lot of work to do on it to make it awesome, but it&apos;s included in the app generator and it seemed worth mentioning nonetheless.

</p>
<p>It uses QUnit, the clientside testing tool made by the jQuery team. But rather than run simple programmatic tests. It loads your app into an <code>&lt;iframe&gt;</code> and walks you through the QA process that you&apos;ve defined for it. You can automate high-level tests like filling in and submitting forms, etc. But, in addition, at the times you&apos;ve specified it will stop and ask the user for visual verification or to perform some user action such as a drag-and-drop interactions or scrolling-related features that may be hard to test programatically. So some of the unit tests are considered a pass or fail based on a human&apos;s answer to &quot;did it work?&quot;

</p>
<p>This approach makes it possible to define an explicit set of app interactions to test. So it&apos;s like a partially automated QA checklist.

</p>
<p>Testing in other browsers will just involve running through the test sequence in other those other browsers. Using a service like Browserling or BrowserStack lets us walk through this process in whatever browsers we&apos;re targeting.

</p>
<p>SpaceMonkey is still under heavy development, but a <code>clienttests</code> folder and sample QA workflow is included in the app generated by the humanjs app generator. 

</p>
<p>You end up writing tests that look like this:

</p>
<pre><code class="javascript">// Load the app into our iframe
monkey.loadApp(&apos;/&apos;, {
    height: 500,
    width: 600,
    bugUrl: &apos;https://github.com/henrikjoreteg/humanjs-sample-app/issues/new&apos;
});

// This is a normal QUnit test
test(&apos;basic app experience&apos;, function () {
    // Here we start a chain of interactions
    monkey
        // We can log out messages to the console
        .log(&apos;starting&apos;)
        // Wait for things to appear
        .waitForVisible(&apos;#pages .page&apos;)
        // Ask for user confirmation
        .confirm(&apos;The app loaded to the home page.&apos;)
        .confirm(&apos;The &quot;home&quot; nav tab is active&apos;)
        // Navigate to different urls
        .goToPage(&apos;/collections&apos;)
        .confirm(&apos;Collection demo page visible&apos;)
        .confirm(&apos;List of people are visible each with avatars&apos;)
        // We can also provide a set of instructions of something
        // that is about to happen. And instruct the user to look
        // for specific behaviors.
        .instruct(&apos;Five users will be added. Please ensure.&apos;, [
            &apos;each one is added at the bottom of the list&apos;,
            &apos;each has a readable name an avatar&apos;
        ])
        // Simulate clicks
        .click(&apos;button.add&apos;)
        .click(&apos;button.add&apos;)
        .click(&apos;button.add&apos;)
        .click(&apos;button.add&apos;)
        .click(&apos;button.add&apos;)
        .confirm(&apos;Everything look ok?&apos;)
        .confirm(&apos;I can visually re-arrange them by pressing, &quot;shuffle&quot;&apos;)
        .confirm(&apos;I can hit reset and they disappear, and fetch and they come back.&apos;)
        .confirm(&apos;I can delete them by clicking &quot;delete&quot;&apos;)
        .goToPage(&apos;/info&apos;)
        .confirm(&apos;Info page is visible&apos;)
        // Call this when done
        .destroy();
});</code></pre>
<p>To see it in action:

</p>
<ol>
<li>Install the app generator using npm: <code>npm i humanjs -g</code> </li>
<li>Run the generator and answer its questions: <code>humanjs</code></li>
<li>Run the generated app and visit <code>http://localhost:3000/test</code> in a browser</li>
</ol>
<p>As I mentioned, we still have a lot of work to do in making SpaceMonkey a well-structured standalone library. But it seemed useful and functional enough to include.
</p>

    </main>
    <footer><span class="prev"><a href="/book/ch10-launch-sequence.html">ch10 - launch sequence</a></span><span class="next"><a href="/book/ch12-settings-and-configs.html">ch12 - settings and configs</a></span>
    </footer>
  </body>
  <script src="/static/js/highlight.pack.js"></script>
  <script src="/static/js/slugger.js"></script>
  <script src="/static/js/setup.js"></script>
  <script src="http://static.andyet.com/tag.js"></script>
</html>