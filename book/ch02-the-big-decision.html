<!DOCTYPE html>
<html>
  <head>
    <link type="text/css" rel="stylesheet" href="/static/css/main.css">
    <link type="text/css" rel="stylesheet" href="/static/css/&amp;yet-highlight.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-44685415-1', 'humanjavascript.com');
      ga('send', 'pageview');
    </script>
    <title>Human JavaScript: ch02 - the big decision</title>
  </head>
  <body>
    <nav>
      <h3>Chapters</h3>
      <ul id="chapters"><a href="ch00-foreword.html" class="h2">ch00 - foreword</a><a href="ch01-introduction.html" class="h2">ch01 - introduction</a><a href="ch02-the-big-decision.html" class="h2">ch02 - the big decision</a><a href="ch03-code-for-humans.html" class="h2">ch03 - code for humans</a><a href="ch04-organizing-your-code.html" class="h2">ch04 - organizing your code</a><a href="ch05-eventification.html" class="h2">ch05 - eventification</a><a href="ch06-models.html" class="h2">ch06 - models</a><a href="ch07-views.html" class="h2">ch07 - views</a><a href="ch08-templating.html" class="h2">ch08 - templating</a><a href="ch09-clientside-routing.html" class="h2">ch09 - clientside routing</a><a href="ch10-launch-sequence.html" class="h2">ch10 - launch sequence</a><a href="ch11-testing-and-qa-that-doesnt-suck.html" class="h2">ch11 - testing and QA that doesnt suck</a><a href="ch12-settings-and-configs.html" class="h2">ch12 - settings and configs</a><a href="ch13-caveats.html" class="h2">ch13 - caveats</a><a href="ch14-conclusion.html" class="h2">ch14 - conclusion</a>
      </ul>
      <div id="slider"></div>
    </nav>
    <main>
      <h1 class="humanjs">HumanJS</h1><h1>Client or server? Go big or go home.</h1>
<p>As someone who writes lots of JavaScript, you might think I&apos;d advocate that everything should be a single-page app. In short: No.

</p>
<p>Make things as simple as you possibly can. Programming is complex, expensive, and time consuming. Pragmatism is the only way to finish anything.

</p>
<p>For many types of applications, building a single-page app is harder and gives you no additional value. I do think there will be a day when that&apos;s no longer the case. But we&apos;re not there yet.

</p>
<p>So, instead, think about how you want your app to be used. Is it something that a user is going to load once and leave sitting on their desktop all day? Or is it something that&apos;s quickly referenced and then closed?

</p>
<p>As engineers we over-engineer things ALL THE TIME. Just think how many blogs hit a database with each and every request when really they could just be static HTML, generated from markdown or something (example: <a href="https://github.com/mojombo/jekyll">Jekyll</a>).

</p>
<p>Building client-side apps is often more complicated than a server-side rendered app. Decide carefully. Ask yourself, is there additional benefit for your users? Are you building something that is opened and closed frequently, or are you building an experience? How often does the data in the application change? Do you care if it changes while the app is open?


</p>
<h2>So I didn&apos;t talk you out of it? Ok, then go all out!</h2>
<p><code>&lt;patronizing tone&gt;</code> So you&apos;ve heard of &quot;separation of concerns&quot; <code>&lt;/patronizing tone&gt;</code>. We&apos;re taught to build tools and components that have a simple job and are self-contained. It makes code more reusable and more maintainable, and keeps developers more sane. 

</p>
<p>HOWEVER, the first thing people most commonly do when building web apps is render a bunch of HTML on the server, then send it to the client and start shuffling it around with a bunch of JavaScript! Just like that we&apos;ve coupled server and client code because both of them now have to care about rendering and presentation.

</p>
<p>Pick one or the other, seriously. If you&apos;re building an &quot;app&quot; where a significant portion of the data will be rendered on the client, just freakin&apos; render <em>all</em> of it on the client. Don&apos;t mess around. It&apos;s just ugly to have to send a bunch of partially rendered HTML to the client and then start mucking around with it. 

</p>
<p>One of my favorite things to show developers from the And Bang codebase is the HTML we send to the browser. Here it is... in its entirety as of this writing:

</p>
<pre><code class="html">
&lt;!DOCTYPE html&gt;
&lt;!-- served with &lt;3, &amp;yet --&gt;
&lt;script&gt;window.times = {start: new Date};&lt;/script&gt;
&lt;link href=&quot;/&amp;!.css&quot; rel=&quot;stylesheet&quot;&gt;
&lt;script src=&quot;/&amp;!.js&quot;&gt;&lt;/script&gt;</code></pre>
<p>Yup. (And yes, omitting <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, and <code>&lt;body&gt;</code> is allowed by the HTML specs.)

</p>
<p>Am I crazy? Probably. 

</p>
<p><em>But</em>, if we&apos;ve decided that we want our server to be able to focus on data we might as well transfer as much of the rendering and presentation of client, to the client. 

</p>
<p>Ok, I&apos;ll admit it, some of this extreme minimalism is due to the aesthetic of it. But, it also makes it abundantly clear that it&apos;s the client&apos;s responsibility to render the application and manage everything within it, including things like the page title and life-cycle of all the document elements.

</p>
<p>Some devs advocate partial rendering on the server for faster load times, etc. To me, once we recognize we&apos;re building a &quot;thick&quot; client, we might as well render it all there. Otherwise, if part of our page state is rendered on the server, somehow we have to re-translate the HTML into state information. Again, I prefer an explicit separation of concerns.

</p>
<p>I can hear the screams now, &quot;What about load times and performance?!?!&quot; I&apos;d rather optimize how my application runs once it&apos;s loaded, than shave milliseconds off the time required to download the initial app. Also, let&apos;s keep in mind that the shiny, retina-ready logo or the the background texture images you used is likely to take up as much bandwidth as your entire application. Anyway, if your app is contained in a single file (more on that later) it&apos;s fairly simple to minify, version, and tell the browser to cache it permanently so your app only downloads it once per revision.

</p>
<p>Also, if you&apos;re pragmatic about this, then you&apos;ll recognize that at some point you&apos;re probably going to render some kind of signup or login form. If you&apos;re sneaky, you could use the inevitable time the user is going to spend on that page the first time to download the app so that when users are logged in they&apos;ll already hit it with a primed cache, even on the first load!

</p>
<p>I&apos;ll cover some more tools and approaches for this in Chapter 4 when discussing code organization.
</p>

    </main>
    <footer><span class="prev"><a href="/book/ch01-introduction.html">ch01 - introduction</a></span><span class="next"><a href="/book/ch03-code-for-humans.html">ch03 - code for humans</a></span>
    </footer>
  </body>
  <script src="/static/js/highlight.pack.js"></script>
  <script src="/static/js/slugger.js"></script>
  <script src="/static/js/setup.js"></script>
  <script src="http://static.andyet.com/tag.js"></script>
</html>